jQuery(function(e){e("ul.dropdown-menu li.dropdown").hover(function(){e(this).addClass("open")},function(){e(this).removeClass("open")});e(".datepicker").datepicker({dateFormat:"yy-mm-dd"})});(function(e){e.validator.setDefaults({ignore:":hidden"});var t=function(t,n){var r=e(n).closest(".form-group");r.addClass("has-error").append(t)},n=function(t,n){e(n).closest(".form-group").removeClass("has-error")},r={init:function(){var t=this;e("a.dokan-banner-drag").on("click",this.imageUpload);e("a.dokan-remove-banner-image").on("click",this.removeBanner);this.validateForm(t);return!1},imageUpload:function(){var t,n=e(this);if(t){t.open();return}t=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1});t.on("select",function(){var r=t.state().get("selection").first().toJSON(),i=n.closest(".dokan-banner");i.find("input.dokan-file-field").val(r.id);i.find("img.dokan-banner-img").attr("src",r.url);e(".image-wrap",i).removeClass("dokan-hide");e(".button-area").addClass("dokan-hide")});t.open()},submitSettings:function(){var t=e("form#settings-form"),n=t.serialize()+"&action=dokan_settings";t.find(".ajax_prev").append('<span class="dokan-loading"> </span>');e.post(dokan.ajaxurl,n,function(n){t.find("span.dokan-loading").remove();e("html,body").animate({scrollTop:100});n.success?e(".dokan-ajax-response").html(e("<div/>",{"class":"alert alert-success",html:"<p>"+n.data+"</p>"})):e(".dokan-ajax-response").html(e("<div/>",{"class":"alert alert-danger",html:"<p>"+n.data+"</p>"}))})},validateForm:function(r){e("form#settings-form").validate({submitHandler:function(e){r.submitSettings()},errorElement:"span",errorClass:"error",errorPlacement:t,success:n})},removeBanner:function(t){t.preventDefault();var n=e(this),r=n.closest(".image-wrap"),i=r.siblings(".button-area");r.find("input.dokan-file-field").val("0");r.addClass("dokan-hide");i.removeClass("dokan-hide")}},i={init:function(){var e=this;this.withdrawValidate(e)},withdrawValidate:function(r){e("form.withdraw").validate({errorElement:"span",errorClass:"error",errorPlacement:t,success:n})}},s={init:function(){var e=this;this.couponsValidation(e)},couponsValidation:function(r){e("form.coupons").validate({errorElement:"span",errorClass:"error",errorPlacement:t,success:n})}},o={init:function(){this.validate(this)},validate:function(r){e("form#dokan-form-contact-seller").validate({errorPlacement:t,success:n,submitHandler:function(t){e(t).block({message:null,overlayCSS:{background:"#fff url("+dokan.ajax_loader+") no-repeat center",opacity:.6}});var n=e(t).serialize();e.post(dokan.ajaxurl,n,function(n){e(t).unblock();typeof n.data!="undefined"&&e(t).find(".ajax-response").html(n.data)})}})}};e(function(){r.init();i.init();s.init();o.init()})})(jQuery);